# Use the official Node.js image as the base image
FROM node:14

# Set the working directory inside the container
WORKDIR /mcarbonportal
COPY . .

RUN npm install --location=global npm

# Build mcarbon portal frontend
RUN rm mcarbonportal/package-lock.json && \
    # Install frontend dependencies and build it for production
    cd mcarbonportal && npm install && \
    npm run build && \
    cd ../ && rm -rf mcarbonportal
